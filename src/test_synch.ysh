#!/usr/bin/env ysh

source synch.ysh

# NOTE: case 1

sema-new (1, &s)
fork { 
  sleep 0.3
  sema-down (s)
  echo 1
}
fork { 
  sleep 0.6
  sema-down (s)
  echo 2
}
fork { 
  sleep 0.9
  sema-down (s)
  echo 3
}
sleep 1.2
echo 4
sema-up (s)
sleep 0.3
echo 5
sema-up (s)
sleep 0.3
sema-destroy (s)
